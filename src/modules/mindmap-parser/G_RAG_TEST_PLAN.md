# G-RAG 图数据检索增强生成测试计划

## 概述

本测试计划旨在验证OPML格式思维导图转换为图数据后，与RAG（检索增强生成）系统的集成效果。测试将评估图数据的搜索能力、上下文检索质量和整体性能。

## 测试目标

1. **验证OPML解析效果**：确保OPML文件能正确转换为图数据结构
2. **测试关键词搜索能力**：验证基于反向索引的节点搜索功能
3. **评估上下文检索质量**：测试子图查询的准确性和完整性
4. **性能基准测试**：评估搜索响应时间和系统吞吐量
5. **批量测试稳定性**：验证系统在大量查询下的稳定性

## 测试环境

### 前端测试页面
- URL: `http://localhost:3200/mindmap-test`
- 新增G-RAG测试标签页，包含三种测试模式

### 后端API接口
- 单次测试: `POST /parser/graphs/g-rag/test`
- 批量测试: `POST /parser/graphs/g-rag/batch-test`
- 性能测试: `GET /parser/graphs/g-rag/performance-test`

## 测试用例

### 1. 基础功能测试

#### 1.1 OPML文件上传和解析
**目标**: 验证OPML文件能正确解析为图数据
**步骤**:
1. 准备标准OPML测试文件
2. 通过"文件上传"标签页上传文件
3. 验证解析结果包含正确的节点和连接
4. 记录图ID用于后续测试

**预期结果**:
- 解析成功，返回图ID
- 节点数量与OPML结构匹配
- 连接关系正确建立

#### 1.2 关键词搜索测试
**目标**: 验证反向索引搜索功能
**步骤**:
1. 使用"节点搜索"功能测试基本关键词
2. 测试中文、英文、特殊字符
3. 验证搜索结果的准确性

**测试关键词**:
- "中心主题"
- "分支"
- "子分支"
- "节点"

### 2. G-RAG集成测试

#### 2.1 单次G-RAG测试
**目标**: 验证单个查询的G-RAG搜索效果
**步骤**:
1. 进入"G-RAG测试"标签页
2. 在"单次测试"区域输入查询
3. 执行测试并分析结果

**测试查询示例**:
```
中心主题
分支结构
子节点关系
思维导图层级
```

**评估指标**:
- 关键词匹配数量
- 上下文节点数量
- 处理时间
- 结果相关性

#### 2.2 批量G-RAG测试
**目标**: 验证多查询批量处理能力
**步骤**:
1. 在"批量测试"区域输入多个查询（每行一个）
2. 执行批量测试
3. 分析整体性能和成功率

**批量测试查询集**:
```
中心主题
主要分支
次要分支
叶子节点
根节点
层级结构
节点关系
思维导图
知识图谱
图数据库
```

**评估指标**:
- 总体成功率
- 平均处理时间
- 失败查询分析
- 系统稳定性

#### 2.3 性能压力测试
**目标**: 评估系统性能极限
**步骤**:
1. 在"性能测试"区域设置迭代次数（建议10-50次）
2. 执行性能测试
3. 分析性能统计数据

**性能指标**:
- 平均响应时间
- 最小/最大响应时间
- 成功率
- 吞吐量（QPS）

### 3. 质量评估测试

#### 3.1 上下文检索质量测试
**目标**: 评估子图查询的质量
**测试方法**:
1. 对搜索结果中的节点执行子图查询
2. 验证返回的上下文是否包含相关的父子节点
3. 检查上下文的完整性和准确性

**质量标准**:
- 包含直接父节点
- 包含直接子节点
- 上下文节点数量合理（3-10个）
- 无重复或无关节点

#### 3.2 搜索相关性测试
**目标**: 评估搜索结果的相关性
**测试方法**:
1. 使用语义相关的查询词
2. 分析返回结果的相关性
3. 计算精确率和召回率

**测试查询对**:
- "中心" vs "中心主题"
- "分支" vs "子分支"
- "节点" vs "叶子节点"

## 测试数据准备

### 标准测试OPML文件
创建包含以下结构的OPML文件：
- 根节点：技术架构
- 一级分支：前端、后端、数据库
- 二级分支：具体技术栈
- 三级分支：详细特性

### 复杂测试OPML文件
创建包含以下特征的复杂OPML文件：
- 深层嵌套（5层以上）
- 大量节点（100+个节点）
- 中英文混合内容
- 特殊字符和符号

## 测试执行流程

### 阶段1：环境准备
1. 启动后端服务
2. 启动前端服务
3. 准备测试数据文件
4. 验证API接口可用性

### 阶段2：基础功能验证
1. 执行OPML解析测试
2. 执行关键词搜索测试
3. 执行子图查询测试
4. 记录基础功能测试结果

### 阶段3：G-RAG集成测试
1. 执行单次G-RAG测试
2. 执行批量G-RAG测试
3. 执行性能压力测试
4. 分析测试结果和性能指标

### 阶段4：质量评估
1. 执行上下文检索质量测试
2. 执行搜索相关性测试
3. 生成质量评估报告

## 成功标准

### 功能性标准
- OPML解析成功率 ≥ 95%
- 关键词搜索准确率 ≥ 90%
- 子图查询完整性 ≥ 85%

### 性能标准
- 单次查询响应时间 ≤ 500ms
- 批量查询平均响应时间 ≤ 200ms
- 系统稳定性（无崩溃）≥ 99%

### 质量标准
- 上下文相关性 ≥ 80%
- 搜索结果精确率 ≥ 75%
- 用户体验满意度 ≥ 85%

## 问题记录和改进建议

### 常见问题类型
1. 解析错误
2. 搜索结果不准确
3. 性能瓶颈
4. 上下文缺失

### 改进方向
1. 优化索引策略
2. 改进搜索算法
3. 增强上下文检索
4. 提升系统性能

## 测试报告模板

### 执行摘要
- 测试目标达成情况
- 关键指标汇总
- 主要发现和建议

### 详细结果
- 各测试用例执行结果
- 性能数据分析
- 质量评估结果

### 问题和建议
- 发现的问题列表
- 改进建议
- 后续优化计划
