# G-RAG 快速测试指南

## 🚀 5分钟快速测试

### 步骤1：启动服务
```bash
# 后端服务
cd trade-backend
npm run start:dev

# 前端服务  
cd trade-frontend
npm run dev
```

### 步骤2：访问测试页面
打开浏览器访问：`http://localhost:3200/mindmap-test`

### 步骤3：上传测试文件
1. 点击"文件上传"标签页
2. 选择文件：`trade-backend/src/modules/mindmap-parser/test-data/complex-mindmap.opml`
3. 点击"上传并存储"
4. 记录返回的图ID（例如：`complex-mindmap-abc123`）

### 步骤4：执行G-RAG测试
1. 点击"G-RAG测试"标签页
2. 在"单次测试"区域输入：`技术架构`
3. 点击"开始测试"
4. 查看测试结果

## 🧪 完整测试流程

### 阶段1：基础功能验证（5分钟）

#### 1.1 文件解析测试
- **目标**：验证OPML文件能正确解析
- **操作**：上传 `complex-mindmap.opml`
- **检查点**：
  - ✅ 解析成功
  - ✅ 节点数 > 100
  - ✅ 连接数 > 100
  - ✅ 获得图ID

#### 1.2 关键词搜索测试
- **目标**：验证基础搜索功能
- **操作**：在"节点搜索"中输入 `React`
- **检查点**：
  - ✅ 找到匹配节点
  - ✅ 显示图ID和节点ID
  - ✅ 响应时间 < 1秒

### 阶段2：G-RAG功能测试（10分钟）

#### 2.1 单次G-RAG测试
**测试查询列表**：
```
技术架构      # 根节点测试
前端技术栈    # 一级分支测试  
React        # 具体技术测试
组件化开发    # 叶子节点测试
数据库       # 多匹配测试
```

**每个查询的检查点**：
- ✅ 搜索成功
- ✅ 找到关键词匹配
- ✅ 返回上下文节点
- ✅ 处理时间 < 500ms

#### 2.2 批量G-RAG测试
**输入查询**（复制粘贴到批量测试区域）：
```
前端技术栈
后端技术栈
数据库技术
云服务平台
DevOps工具链
React
Vue.js
Node.js
Python
MySQL
```

**检查点**：
- ✅ 所有查询处理完成
- ✅ 成功率 > 80%
- ✅ 平均处理时间 < 300ms
- ✅ 返回详细统计信息

#### 2.3 性能测试
**配置**：迭代次数设为 `20`

**检查点**：
- ✅ 测试完成
- ✅ 成功率 > 90%
- ✅ 平均响应时间 < 200ms
- ✅ 系统稳定运行

### 阶段3：质量评估（5分钟）

#### 3.1 上下文质量检查
**测试查询**：`React`

**检查上下文是否包含**：
- ✅ 父节点：框架选择
- ✅ 子节点：组件化开发、虚拟DOM等
- ✅ 同级节点：Vue.js、Angular

#### 3.2 搜索精度检查
**对比测试**：
- 查询 `前端` vs `前端技术栈`
- 查询 `数据库` vs `MySQL`

**检查点**：
- ✅ 更具体的查询返回更精确的结果
- ✅ 结果相关性合理

## 📊 测试结果评估标准

### 🟢 优秀（90-100分）
- 所有基础功能正常
- G-RAG测试成功率 > 95%
- 平均响应时间 < 200ms
- 上下文质量高
- 无系统错误

### 🟡 良好（70-89分）
- 基础功能正常
- G-RAG测试成功率 > 80%
- 平均响应时间 < 500ms
- 上下文基本完整
- 偶有小错误

### 🔴 需要改进（< 70分）
- 基础功能有问题
- G-RAG测试成功率 < 80%
- 响应时间 > 500ms
- 上下文不完整
- 系统不稳定

## 🐛 常见问题排查

### 问题1：文件上传失败
**症状**：上传OPML文件时报错
**排查步骤**：
1. 检查文件格式是否为OPML
2. 检查文件大小是否过大
3. 检查后端服务是否正常运行
4. 查看浏览器控制台错误信息

### 问题2：G-RAG测试无结果
**症状**：G-RAG测试返回空结果
**排查步骤**：
1. 确认已上传并解析OPML文件
2. 检查DynamoDB连接是否正常
3. 尝试使用基础关键词（如"技术架构"）
4. 查看后端日志

### 问题3：响应时间过长
**症状**：测试响应时间超过1秒
**排查步骤**：
1. 检查网络连接
2. 检查DynamoDB性能
3. 减少测试数据量
4. 检查系统资源使用情况

### 问题4：批量测试失败率高
**症状**：批量测试成功率低于80%
**排查步骤**：
1. 检查查询关键词是否存在于数据中
2. 减少并发查询数量
3. 检查系统稳定性
4. 分析失败的具体查询

## 📝 测试报告模板

### 测试环境
- 测试时间：[日期时间]
- 测试人员：[姓名]
- 系统版本：[版本号]
- 测试数据：[使用的OPML文件]

### 测试结果摘要
- 基础功能测试：✅/❌
- G-RAG单次测试：✅/❌
- G-RAG批量测试：✅/❌
- G-RAG性能测试：✅/❌
- 质量评估：✅/❌

### 性能指标
- 文件解析时间：[X]ms
- 单次查询平均时间：[X]ms
- 批量查询成功率：[X]%
- 性能测试成功率：[X]%

### 发现的问题
1. [问题描述]
   - 严重程度：高/中/低
   - 影响范围：[描述]
   - 建议解决方案：[描述]

### 改进建议
1. [建议1]
2. [建议2]
3. [建议3]

### 总体评价
- 评分：[X]/100
- 等级：优秀/良好/需要改进
- 是否可以投入使用：是/否

## 🔧 高级测试选项

### 自定义测试数据
1. 创建自己的OPML文件
2. 包含特定领域的知识结构
3. 测试领域相关的查询

### 压力测试
1. 增加性能测试迭代次数到100
2. 同时运行多个批量测试
3. 监控系统资源使用情况

### API直接测试
使用curl或Postman直接测试API：

```bash
# 单次G-RAG测试
curl -X POST http://localhost:3000/parser/graphs/g-rag/test \
  -H "Content-Type: application/json" \
  -d '{"query": "技术架构"}'

# 批量G-RAG测试  
curl -X POST http://localhost:3000/parser/graphs/g-rag/batch-test \
  -H "Content-Type: application/json" \
  -d '{"queries": ["React", "Vue.js", "Angular"]}'

# 性能测试
curl -X GET "http://localhost:3000/parser/graphs/g-rag/performance-test?iterations=10"
```

## 📞 支持和反馈

如果在测试过程中遇到问题：
1. 查看本指南的问题排查部分
2. 检查后端日志文件
3. 查看浏览器开发者工具
4. 记录详细的错误信息和复现步骤

测试完成后，请提供反馈：
- 测试结果和性能数据
- 发现的问题和建议
- 用户体验评价
- 功能改进建议
